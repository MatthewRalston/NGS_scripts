#!/home/mrals/.rvm/rubies/ruby-2.1.2/bin/ruby
=begin
------------------------------------------------------------------------------
--                                                                          --
--                                MATTHEW RALSTON                           --
--                                                                          --
--                               U N T A N G L E R . R B                    --
--                                                                          --
------------------------------------------------------------------------------
-- TITLE                                                                    --
--                                                                          --
--  Summer 2013                                                             --
--                                                                          --
------------------------------------------------------------------------------
-- This file is designed to untangle unpaired reads from fastq files.       --
--                                                                          --
------------------------------------------------------------------------------
=end

################################################
#
#               R E Q U I R E
#
################################################





################################################
#
#               U S E R    V A R I A B L E S
#
################################################
UNTANGLE=ARGV[0]




################################################
#
#               S U B - R O U T I N E S
#
################################################

################################################

################################################


def main
  read = []
  while line = STDIN.gets
    if line[0..3] == "@HWI"
      if line.include?("#{UNTANGLE}:N:0:")
        read = [line.chomp]
      else
        read = []
      end
    else
      read << line.chomp if read.size > 0
    end
    STDOUT.puts(read.join("\n")) if read.size == 4
  end

end


#*****************************************************************************#
################################################
#
#-----------------------------------------------
#
#                   M A I N
#-----------------------------------------------
#
################################################

main





##########################  E O F   ############################################
